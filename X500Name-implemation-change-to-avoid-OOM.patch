From 6b96a97e8e04d62f4ab4b03c05682765516c0872 Mon Sep 17 00:00:00 2001
From: zhanggaofeng <zhanggaofeng9@huawei.com>
Date: Mon, 23 Sep 2019 10:43:46 +0000
Subject: [PATCH] X500Name implemation change to avoid OOM

Summary: X500Name implemation change.
LLT:
bug link:
---
 jdk/src/share/classes/sun/security/x509/X500Name.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/jdk/src/share/classes/sun/security/x509/X500Name.java b/jdk/src/share/classes/sun/security/x509/X500Name.java
index 447395c503..2062dc9747 100644
--- a/jdk/src/share/classes/sun/security/x509/X500Name.java
+++ b/jdk/src/share/classes/sun/security/x509/X500Name.java
@@ -1108,7 +1108,7 @@ public class X500Name implements GeneralNameInterface, Principal {
      * and speed recognition of common X.500 attributes.
      */
     static ObjectIdentifier intern(ObjectIdentifier oid) {
-        ObjectIdentifier interned = internedOIDs.putIfAbsent(oid, oid);
+        ObjectIdentifier interned = internedOIDs.getOrDefault(oid, oid);
         return (interned == null) ? oid : interned;
     }
 
-- 
2.12.3

